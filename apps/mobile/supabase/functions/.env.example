# Supabase Edge Functions Environment Variables
# Copy this file to .env and fill in the values

# ===========================================
# SUPABASE CONFIGURATION (auto-injected)
# ===========================================
# These are automatically available in Edge Functions:
# - SUPABASE_URL
# - SUPABASE_ANON_KEY
# - SUPABASE_SERVICE_ROLE_KEY

# ===========================================
# STRIPE CONFIGURATION (required for payments)
# ===========================================

# Stripe Secret Key (starts with sk_test_ or sk_live_)
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here

# Stripe Webhook Secret (starts with whsec_)
# Get from: https://dashboard.stripe.com/webhooks
# Create a webhook endpoint pointing to: https://<project-ref>.supabase.co/functions/v1/stripe-webhook
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# Stripe Price IDs for each tier/billing cycle
# Create products and prices at: https://dashboard.stripe.com/products
# Premium Tier
STRIPE_PRICE_ID_PREMIUM_MONTHLY=price_premium_monthly_id
STRIPE_PRICE_ID_PREMIUM_ANNUAL=price_premium_annual_id

# Pro Tier
STRIPE_PRICE_ID_PRO_MONTHLY=price_pro_monthly_id
STRIPE_PRICE_ID_PRO_ANNUAL=price_pro_annual_id

# ===========================================
# APP CONFIGURATION
# ===========================================

# App URL for redirect after checkout/portal
APP_URL=https://tailtracker.app

# ===========================================
# SETTING UP STRIPE PRODUCTS
# ===========================================
# 1. Go to https://dashboard.stripe.com/products
# 2. Create a product called "TailTracker Premium"
#    - Add two prices:
#      - Monthly: EUR 5.99, recurring monthly
#      - Annual: EUR 60.00, recurring yearly
# 3. Create a product called "TailTracker Pro"
#    - Add two prices:
#      - Monthly: EUR 8.99, recurring monthly
#      - Annual: EUR 90.00, recurring yearly
# 4. Copy each price ID (price_xxxxxx) to the corresponding env variable

# ===========================================
# SETTING UP WEBHOOKS
# ===========================================
# 1. Go to https://dashboard.stripe.com/webhooks
# 2. Click "Add endpoint"
# 3. Enter URL: https://<your-project-ref>.supabase.co/functions/v1/stripe-webhook
# 4. Select events:
#    - checkout.session.completed
#    - customer.subscription.created
#    - customer.subscription.updated
#    - customer.subscription.deleted
#    - invoice.payment_succeeded
#    - invoice.payment_failed
# 5. Copy the webhook signing secret to STRIPE_WEBHOOK_SECRET

# ===========================================
# DEPLOYING SECRETS TO SUPABASE
# ===========================================
# Use the Supabase CLI to set secrets:
#
# supabase secrets set STRIPE_SECRET_KEY="sk_test_xxx"
# supabase secrets set STRIPE_WEBHOOK_SECRET="whsec_xxx"
# supabase secrets set STRIPE_PRICE_ID_PREMIUM_MONTHLY="price_xxx"
# supabase secrets set STRIPE_PRICE_ID_PREMIUM_ANNUAL="price_xxx"
# supabase secrets set STRIPE_PRICE_ID_PRO_MONTHLY="price_xxx"
# supabase secrets set STRIPE_PRICE_ID_PRO_ANNUAL="price_xxx"
# supabase secrets set APP_URL="https://tailtracker.app"
